<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script type="text/javascript">

    $(document).ready(function () {

        $('.ksb-status').click(function () {
            var ksbStatus = $('.ksb-status:checked').val();
            switch (taskCategory) {
                case "inprogress":
                    $('.ksbStatus').val(1);
                    break;
                case "readyforreview":
                    $('.ksbStatus').val(2);
                    break;
                case "completed":
                    $('.ksbStatus').val(3);
                    break;
                default:
                    $('.ksbStatus').val(0);
            }
        });

        $(".save-ksb").click(function (e) {
            $(".form").submit();
        });

        $('body').on('click', '.remove-ksb-task', function (e) {
            $('.app-dropdown__menu').hide();
            $(this).closest('.linkedKsb').hide();
            if (confirm('Are you sure you want to remove the link between this task and the knowledge, skill or behaviour (KSB)?')) {
                var progressId = $('.progressId').val();
                var taskId = $('.taskId').val();
                $(this).closest('.linkedTask', '.linkedKsb').hide();

                $.ajax({
                    type: "DELETE",
                    url: '@Url.Action("RemoveTaskFromKsbProgress", "Ksb")',
                    data: { progressId: progressId, taskId: taskId },
                    dataType: "json"
                });
                return false;
            }
        });


    });

</script>