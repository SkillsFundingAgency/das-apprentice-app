<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script type="text/javascript">

    $(document).ready(function () {
       
        $('.ksb-status-radio').each(function () {
            var value = $(this).val();
            switch (value) { 
               case 'NotStarted':
                    $(this).closest('.app-radios__item').find('.app-tag').addClass('app-tag--pink');
                    break;
                case 'InProgress':
                    $(this).closest('.app-radios__item').find('.app-tag').addClass('app-tag--yellow');
                    break;
                case 'ReadyForReview':
                    $(this).closest('.app-radios__item').find('.app-tag').addClass('app-tag--blue');
                    break;
                case 'Completed':
                    $(this).closest('.app-radios__item').find('.app-tag').addClass('app-tag--green');
                    break;
            }
        });

        $('.ksb-status-display').each(function () {
            var statusDisplay = $(this).text();
            switch (true){
                case statusDisplay.includes('Not started'):
                    $(this).addClass('app-tag--pink');
                    break;
                case statusDisplay.includes('In progress'):
                    $(this).addClass('app-tag--yellow');
                    break;
                case statusDisplay.includes('Ready for review'):
                    $(this).addClass('app-tag--blue');
                    break;
                case statusDisplay.includes('Completed'):
                    $(this).addClass('app-tag--green');
                    break;
            }
        });

        $('.ksb-status').click(function () {
            var ksbStatus = $('.ksb-status:checked').val();
            switch (taskCategory) {
                case "inprogress":
                    $('.ksbStatus').val(1);
                    break;
                case "readyforreview":
                    $('.ksbStatus').val(2);
                    break;
                case "completed":
                    $('.ksbStatus').val(3);
                    break;
                default:
                    $('.ksbStatus').val(0);
            }
        });

        $(".save-ksb").click(function (e) {
            $(".form").submit();
        });


        $('body').on('click', '.tab-knowledge', function (e) {

            $('.app-tabs__list-item').removeClass('app-tabs__list-item--selected');
            $(this).closest('li').addClass('app-tabs__list-item--selected');

            $('.Knowledge').show();
            $('.Skill').hide();
            $('.Behaviour').hide();

        });

        $('body').on('click', '.tab-skills', function (e) {

            $('.app-tabs__list-item').removeClass('app-tabs__list-item--selected');
            $(this).closest('li').addClass('app-tabs__list-item--selected');

            $('.Knowledge').hide();
            $('.Skill').show();
            $('.Behaviour').hide();

        });

        $('body').on('click', '.tab-behaviours', function (e) {

            $('.app-tabs__list-item').removeClass('app-tabs__list-item--selected');
            $(this).closest('li').addClass('app-tabs__list-item--selected');

            $('.Knowledge').hide();
            $('.Skill').hide();
            $('.Behaviour').show();
        });

        $('body').on('click', '.remove-ksb-task', function (e) {
            $('.app-dropdown__menu').removeClass('app-dropdown__menu--visible');
            if(confirm('Are you sure you want to remove the link between this task and the knowledge, skill or behaviour (KSB)?')) {
            var progressId = $('.progressId').val();
            var taskId = $('.taskId').val();
                $(this).closest('.linkedTask').hide();
            
             $.ajax({
                type: "DELETE",
                url: '@Url.Action("RemoveTaskFromKsbProgress", "Ksb")',
                data: { progressId: progressId, taskId: taskId },
                dataType: "json"
            });
            return false;
            }
        });


    });

</script>