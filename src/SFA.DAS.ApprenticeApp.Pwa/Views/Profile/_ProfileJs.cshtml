﻿<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>


<script type="text/javascript">
    const checkUICompatibility = () => {
        if (!("serviceWorker" in navigator)) {
            console.log("Service worker not supported");
            throw new Error("Service worker not supported");
        }

        if (!("Notification" in window)) {
            console.log("Notification not supported");
            throw new Error("Notification not supported");
        }
    };

    const displayNotificationButtons = () => {
        const enableNotificationsButtons = document.querySelectorAll(
            ".enable-notifications"
        );

        for (const element of enableNotificationsButtons) {
            if (Notification.permission === "default") {
                element.classList.add("app-modal--visible");
            } else {
                element.classList.remove("app-modal--visible");
            }
        }
    };

    //step 1: check if the browser supports service workers and notifications
    checkUICompatibility();

    //step 2: manage ui elements based on existing permission status
    displayNotificationButtons();
</script>