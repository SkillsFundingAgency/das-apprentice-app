@model SFA.DAS.ApprenticeApp.Pwa.ViewModels.EditTaskPageModel
@{
    ViewData["Title"] = "Tasks";
    ViewData["Section"] = "Tasks";
    ViewBag.HideNavigation = true;
}
@section BackLink {
    <a asp-action="Edit" asp-controller="Tasks" asp-route-id="@Model.Task.TaskId" asp-route-status="@Model.StatusId"
       class="govuk-back-link app-back-link">Back without deleting</a>
}

        <h1 class="govuk-heading-xl">Are you sure you want to delete this task?</h1>

        <div class="govuk-inset-text">
            <h2 class="govuk-heading-s">@Model.Task.Title</h2>
            
            <ul class="govuk-list govuk-list--spaced govuk-!-margin-bottom-0">
                @if (Model.Task.TaskLinkedKsbs.Any())
                {
                <li class="app-icon-item">
                    <svg width="24" height="24" class="app-icon-item__icon">
                        <use href="/assets/icons/sprite.svg#link"></use>
                    </svg>
                    <span class="app-icon-item__text">
                                    Linked to @Model.Task.TaskLinkedKsbs.Count.ToString()
                                    @if (Model.Task.TaskLinkedKsbs.Count > 1)
                                    {
                                        <text>KSBs</text>
                                    }
                                    else
                                    {
                                        <text>KSB</text>
                                    }
                                </span>
                </li>
                }
                <li class="app-icon-item">
                    <svg width="24" height="24" class="app-icon-item__icon">
                        <use href="/assets/icons/sprite.svg#calendar"></use>
                    </svg>
                    <span class="app-icon-item__text">Due @string.Format("{0:d MMMM, h:mm}", Model.Task.DueDate)@string.Format("{0:tt}", Model.Task.DueDate).ToLower()</span>
                </li>
                @if (Model.Task.TaskReminders.Any())
                {
                <li class="app-icon-item">
                    <svg width="24" height="24" class="app-icon-item__icon">
                        <use href="/assets/icons/sprite.svg#notifications"></use>
                    </svg>
                    <span class="app-icon-item__text">
                        Reminder set:
                    @switch (@Model.Task.TaskReminders.Select(r => r.ReminderValue).First())
                    {
                        case 0:
                            <text>0 minutes before</text>
                            break;
                        case 60:
                            <text>1 hour before</text>
                            break;
                        case 1440:
                            <text>1 day before</text>
                            break;
                        default:
                            <span class="app-js-convert-minutes-to-date"
                                  data-due="@string.Format("{0:d MMMM yyyy, HH:mm}", Model.Task.DueDate)"
                                  data-val="@Model.Task.TaskReminders.Select(r => r.ReminderValue).First()"></span>
                    break;
                    }
                    </span>
                </li>
                }
                @if (!String.IsNullOrEmpty(Model.Task.Note))
                {
                <p>
                    <span>Note added</span>
                </p>
                }
                @if (Model.Task.TaskFiles.Any())
                {
                <p>
                    <span>@Model.Task.TaskFiles.Count.ToString() file(s) attached</span>
                </p>
                }
            
            
            </ul>
        </div>

        <form action="@Url.Action("Delete", "Tasks")" method="post">
            <input type="hidden" name="taskId" value="@Model.Task.TaskId" />
            <input type="hidden" name="status" value="@Model.StatusId" />
            <div class="govuk-button-group app-button-group">
                <a asp-action="Edit" asp-controller="Tasks" asp-route-id="@Model.Task.TaskId" asp-route-status="@Model.StatusId"
                   class="govuk-back-link app-back-link">Back without deleting</a>
                <button type="submit" class="govuk-button govuk-button--warning" data-module="govuk-button">
                    Delete task
                </button>
               
            </div>
        </form>
 
